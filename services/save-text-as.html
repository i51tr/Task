<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>EasyTasks</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="../assets/img/favicon.png" rel="icon">
  <link href="../assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Montserrat:300,400,500,700" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />


  <!-- Vendor CSS Files -->
  <link href="../assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="../assets/css/style.css" rel="stylesheet">
  
  <script src="/assets/js/SaveText.js" defer></script>

  <style>
  .wrapper{
    width: 443px;
    border-radius: 7px;
    background: #fff;
    padding: 30px 25px 40px;
    box-shadow: 0 10px 15px rgba(0,0,0,0.05);
  }
  .wrapper :where(textarea, input, select, button){
    width: 100%;
    outline: none;
    border: none;
    font-size: 17px;
    border-radius: 5px;
  }
  .wrapper :where(textarea, input)::placeholder{
    color: #aaa;
  }
  .wrapper :where(textarea, input):focus{
    box-shadow: 0px 2px 4px rgba(0,0,0,0.08);
  }
  .wrapper textarea{
    height: 270px;
    resize: none;
    padding: 8px 13px;
    font-size: 17.6px;
    border: 1px solid #ccc;
  }
  .wrapper .file-options{
    display: flex;
    margin-top: 10px;
    align-items: center;
    justify-content: space-between;
  }
  .file-options .option{
    width: calc(100% / 2 - 8px);
  }
  .option label{
    font-size: 17px;
  }
  .option :where(input, .select-menu){
    height: 50px;
    padding: 0 13px;
    margin-top: 6px;
    border-radius: 5px;
    border: 1px solid #bfbfbf;
  }
  .option .select-menu select{
    height: 50px;
    background: none;
  }
  .wrapper .save-btn{
    color: #fff;
    cursor: pointer;
    opacity: 0.6;
    padding: 16px 0;
    margin-top: 20px;
    pointer-events: none;
    background: #3498DB;
  }
  .save-btn:hover{
    background: #236a99;
  }
  textarea:valid ~ .save-btn{
    opacity: 1;
    pointer-events: auto;
    transition: all 0.3s ease;
  }

  @media screen and (max-width: 475px) {
    .wrapper{
      padding: 25px 18px 30px;
    }
    .wrapper :where(textarea, input, select, button, label){
      font-size: 16px!important;
    }
    .file-options .option{
      width: calc(100% / 2 - 5px);
    }
    .option :where(input, .select-menu){
      padding: 0 10px;
    }
    .wrapper .save-btn{
      padding: 15px 0;
    }
  }
  </style>
  
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top d-flex align-items-center">
    <div class="container d-flex justify-content-between">

      <div class="logo">
        <!-- Uncomment below if you prefer to use an text logo -->
        <!-- <h1><a href="index.html">NewBiz</a></h1> -->
        <a href="../index.html"><img src="../assets/img/LogoTitle.png" alt="" class="img-fluid"></a>
      </div>

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="../index.html">Home</a></li>
          <li><a class="nav-link scrollto" href="#about">About</a></li>
          <li><a class="nav-link scrollto" href="#services">Services</a></li>
          <li><a class="nav-link scrollto" href="#team">Team</a></li>
          <li><a class="nav-link scrollto" href="#contact">Contact</a></li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->

    </div>
  </header><!-- #header -->

  <!-- ======= Hero Section ======= -->
  <section id="hero" class="clearfix">
    <div class="d-flex" style="justify-content: center; text-align: center;" data-aos="fade-up">
      <div class="hero-info" data-aos="zoom-in" data-aos-delay="100" >
        <h2>We Make Your Tasks Easier</h2>
      </div>

    </div>
  </section><!-- End Hero Section -->

  <div class="wrapper" style="margin: auto; margin-bottom: 50px; margin-top: 100px;">
    <textarea spellcheck="false" placeholder="Enter something to save" required>Lorem Ipsum is simply dummy text of the printing and type setting industry. Lorem Ipsuam has been the industries standard dummy texts ever since this 1500s, when an unknown printer took a galley of type and scrambled it to make a type of dollar specimen book. It have survived not only five centuries, but also from the leap into electronic typesetting.</textarea>
    <div class="file-options">
      <div class="option file-name">
        <label>File name</label>
        <input type="text" spellcheck="false" placeholder="Enter file name">
      </div>
      <div class="option save-as">
        <label>Save as</label>
        <div class="select-menu">
          <select>
            <option value="text/plain">Text File (.txt)</option>
            <option value="text/javascript">JS File (.js)</option>
            <option value="text/html">HTML File (.html)</option>
            <option value="image/svg+xml">SVG File (.svg)</option>
            <option value="application/msword">Doc File (.doc)</option>
            <option value="application/vnd.ms-powerpoint">PPT File (.ppt)</option>
          </select>
        </div>
      </div>
    </div>
    <button class="save-btn" type="button">Save As Text File</button>
  </div>



  <!-- ======= Footer ======= -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-row">

        <div class="footer-col">
          <h4>Company</h4>
          <ul>
            <li><a href="#">about us</a></li>
            <li><a href="#">our services</a></li>
            <li><a href="#">privacy policy</a></li>
            <li><a href="#">affiliate program</a></li>
          </ul>
        </div>

        <div class="footer-col">
          <h4>get help</h4>
          <ul>
            <li><a href="#">FAQ</a></li>
            <li><a href="#">Contact us</a></li>
            <li><a href="#">Sitemap</a></li>
          </ul>
        </div>

        <div class="footer-col">
            <h4>Our websites</h4>
            <ul>
              <li><a href="#">Files Editor</a></li>
              <li><a href="#">Video Editor</a></li>
              <li><a href="#">Picture Editor</a></li>
              <li><a href="#">other</a></li>
            </ul>
          </div>

        <div class="footer-col">
          <h4>follow us</h4>
          <div class="social-links">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-linkedin-in"></i></a>
          </div>
        </div>
      </div>
    </div>
  </footer><!-- End Footer -->

  <!-- Vendor JS Files -->
  <script src="../assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="../assets/vendor/aos/aos.js"></script>
  <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="../assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="../assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="../assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="../assets/js/main.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js"></script>

  <script>
    
    const fileInput = document.querySelector(".file-input"),
        filterOptions = document.querySelectorAll(".filter button"),
        filterName = document.querySelector(".filter-info .name"),
        filterValue = document.querySelector(".filter-info .value"),
        filterSlider = document.querySelector(".slider input"),
        rotateOptions = document.querySelectorAll(".rotate button"),
        previewImg = document.querySelector(".preview-img img"),
        resetFilterBtn = document.querySelector(".reset-filter"),
        chooseImgBtn = document.querySelector(".choose-img"),
        saveImgBtn = document.querySelector(".save-img");

        let brightness = "100", saturation = "100", inversion = "0", grayscale = "0";
        let rotate = 0, flipHorizontal = 1, flipVertical = 1;

        const loadImage = () => {
            let file = fileInput.files[0];
            if(!file) return;
            previewImg.src = URL.createObjectURL(file);
            previewImg.addEventListener("load", () => {
                resetFilterBtn.click();
                document.querySelector(".container").classList.remove("disable");
            });
        }

        const applyFilter = () => {
            previewImg.style.transform = `rotate(${rotate}deg) scale(${flipHorizontal}, ${flipVertical})`;
            previewImg.style.filter = `brightness(${brightness}%) saturate(${saturation}%) invert(${inversion}%) grayscale(${grayscale}%)`;
        }

        filterOptions.forEach(option => {
            option.addEventListener("click", () => {
                document.querySelector(".active").classList.remove("active");
                option.classList.add("active");
                filterName.innerText = option.innerText;

                if(option.id === "brightness") {
                    filterSlider.max = "200";
                    filterSlider.value = brightness;
                    filterValue.innerText = `${brightness}%`;
                } else if(option.id === "saturation") {
                    filterSlider.max = "200";
                    filterSlider.value = saturation;
                    filterValue.innerText = `${saturation}%`
                } else if(option.id === "inversion") {
                    filterSlider.max = "100";
                    filterSlider.value = inversion;
                    filterValue.innerText = `${inversion}%`;
                } else {
                    filterSlider.max = "100";
                    filterSlider.value = grayscale;
                    filterValue.innerText = `${grayscale}%`;
                }
            });
        });

        const updateFilter = () => {
            filterValue.innerText = `${filterSlider.value}%`;
            const selectedFilter = document.querySelector(".filter .active");

            if(selectedFilter.id === "brightness") {
                brightness = filterSlider.value;
            } else if(selectedFilter.id === "saturation") {
                saturation = filterSlider.value;
            } else if(selectedFilter.id === "inversion") {
                inversion = filterSlider.value;
            } else {
                grayscale = filterSlider.value;
            }
            applyFilter();
        }

        rotateOptions.forEach(option => {
            option.addEventListener("click", () => {
                if(option.id === "left") {
                    rotate -= 90;
                } else if(option.id === "right") {
                    rotate += 90;
                } else if(option.id === "horizontal") {
                    flipHorizontal = flipHorizontal === 1 ? -1 : 1;
                } else {
                    flipVertical = flipVertical === 1 ? -1 : 1;
                }
                applyFilter();
            });
        });

        const resetFilter = () => {
            brightness = "100"; saturation = "100"; inversion = "0"; grayscale = "0";
            rotate = 0; flipHorizontal = 1; flipVertical = 1;
            filterOptions[0].click();
            applyFilter();
        }

        const saveImage = () => {
            console.log("hello")
            const canvas = document.createElement("canvas");
            const ctx = canvas.getContext("2d");
            canvas.width = previewImg.naturalWidth;
            canvas.height = previewImg.naturalHeight;
            
            ctx.filter = `brightness(${brightness}%) saturate(${saturation}%) invert(${inversion}%) grayscale(${grayscale}%)`;
            ctx.translate(canvas.width / 2, canvas.height / 2);
            if(rotate !== 0) {
                ctx.rotate(rotate * Math.PI / 180);
            }
            ctx.scale(flipHorizontal, flipVertical);
            ctx.drawImage(previewImg, -canvas.width / 2, -canvas.height / 2, canvas.width, canvas.height);
            
            const link = document.createElement("a");
            link.download = "image.jpg";
            link.href = canvas.toDataURL();
            link.click();
        }

        filterSlider.addEventListener("input", updateFilter);
        resetFilterBtn.addEventListener("click", resetFilter);
        saveImgBtn.addEventListener("click", saveImage);
        fileInput.addEventListener("change", loadImage);
        chooseImgBtn.addEventListener("click", () => fileInput.click());

    </script>
</body>

</html>